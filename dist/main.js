(()=>{"use strict";const e=({timing:e,draw:t,duration:o})=>{let n=performance.now();requestAnimationFrame((function l(r){let a=(r-n)/o;a>1&&(a=1);let c=e(a);t(c),a<1&&requestAnimationFrame(l)}))},t=({formId:t,someElem:o=[]})=>{const n=document.getElementById(t),l=document.createElement("div"),r={};try{if(!n)throw new Error("Верните форму на место!!!");n.addEventListener("submit",(o=>{o.preventDefault(),(()=>{const o=new FormData(n),a=n.querySelectorAll("input");var c;l.textContent="Загрузка...",n.append(l),o.forEach(((e,t)=>{""!=e&&(r[t]=e)})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("form-name")&&(/[а-яА-Я\s]+[^\-]+/g.test(e.value)||(t=!1)),e.classList.contains("mess")&&""!=e.value&&(/^[а-яА-Я\s\d\.\,\-]+$/.test(e.value)||(t=!1)),e.classList.contains("form-phone")&&(/^[+]?\d+$/.test(e.value)||(t=!1))})),t})(a)?(c=r,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((o=>{const n=document.querySelector(".popup");l.style.color="green",l.textContent="Спасибо! Наш менеджер с вами свяжется!","form3"==t&&e({timing:e=>e,duration:3e3,draw(e){n.style.opacity=1-e}}),setTimeout((()=>{a.forEach((e=>{e.value=""})),l.style.color="white",n.style.display="none",l.style.display="none",n.style.opacity=1}),3500)})).catch((e=>{l.textContent="Ошибка..."})):l.textContent="Ошибка...  Неверный формат"})()}))}catch(e){console.log(e.message)}};(function(e){const t=document.getElementById("timer-days"),o=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),l=document.getElementById("timer-seconds"),r=document.getElementById("timer-arr-end");let a=setInterval((function(){let e=function(){let e=Date.now(),t=(Date.parse("7 january 2022")-e)/1e3,o=parseInt(t/86400),n=parseInt(t/3600%24),l=Math.floor(t/60%60),r=Math.floor(t%60);return n=n<10?"0"+n:n,l=l<10?"0"+l:l,r=r<10?"0"+r:r,{difference:t,days:o,hours:n,minutes:l,seconds:r}}();0==e.days?t.style.display="none":r.textContent=["день  ","дня  ","дней  "][function(e){let t=e%10;return 1==t&&11!=e?0:e>4&&e<21||t>4&&t<=9||0==t?2:1}(e.days)]+":",t.textContent=e.days,o.textContent=e.hours,n.textContent=e.minutes,l.textContent=e.seconds,e.difference<0&&(clearInterval(a),t.textContent="",o.textContent="00",n.textContent="00",l.textContent="00",r.textContent="")}),1e3)})(),function(){document.querySelector(".menu");const t=document.querySelector("menu"),o=document.querySelector("body"),n=(document.querySelector('[href="#service-block"]'),()=>{t.classList.toggle("active-menu")});o.addEventListener("click",(o=>{if(o.target.matches("a")&&o.target.closest("menu")){if(o.target.classList.contains("close-btn"))o.preventDefault();else{o.preventDefault();let t=document.querySelector(o.target.hash).getBoundingClientRect().top+window.pageYOffset;e({duration:778,timing:e=>Math.pow(e,12),draw(e){document.documentElement.scrollTop=e*t}})}n()}else if(o.target.closest(".menu"))n();else if(t.classList.contains("active-menu")&&!o.target.closest("menu"))o.preventDefault(),n();else if(o.target.closest('[href="#service-block"]')){o.preventDefault();const t=o.target.closest('[href="#service-block"]').hash;let n=document.querySelector(t).getBoundingClientRect().top+window.pageYOffset,l=document.documentElement.scrollTop;e({duration:1e3,timing:e=>e,draw(e){document.documentElement.scrollTop=l+e*n,document.documentElement.scrollTop>n&&(document.documentElement.scrollTop=n)}})}}))}(),(()=>{const t=document.querySelector(".popup"),o=document.querySelectorAll(".popup-btn"),n=t.querySelector(".popup-close"),l=t.querySelector(".popup-content"),r=["black","brown","darkslategray","maroon","indigo","midnightblue","purple","navy","darkgreen","goldenrod"];o.forEach((o=>{o.addEventListener("click",(()=>{document.documentElement.clientWidth>=768?(()=>{let t=0,o=0,a=!0;n.style.display="none",l.style.borderRadius="90px",e({duration:3e3,timing:e=>e,draw(e){if(o++,n.style.display="none",l.style.borderRadius="90px",o%3==0&&a){let e=Math.floor(10*Math.random());l.style.backgroundColor=r[e],n.style.backgroundColor=r[e]}t=t*e*2.5+250,t<=1440?(n.style.display="none",l.style.borderRadius="90px",l.style.transform=`rotate(${t}deg)`):t>1440&&a?(a=!1,n.style.display="none",l.style.borderRadius="90px",t=1440,l.style.transform=`rotate(${t}deg)`):(l.style.borderRadius="0px",n.style.display="block")}})})():(l.style.backgroundColor="rgb(36, 36, 31)",n.style.backgroundColor="rgb(36, 36, 31)"),t.style.display="block"}))})),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(t.style.display="none")}))})(),((t=100,o=2)=>{const n=document.querySelector(".calc-block"),l=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),s=document.getElementById("total");n.addEventListener("input",(o=>{o.target!==l&&o.target!==r&&o.target!==a&&o.target!==c||(()=>{const o=+l.options[l.selectedIndex].value,n=+r.value;console.log(n);let u=0,d=1,i=1;a.value>1&&(d+=+a.value/10),c.value&&c.value<5?i=2:c.value&&c.value<10&&(i=1.5),o&&n?(u=t*o*n*d*i,e({duration:1e3,timing:e=>e,draw(e){s.textContent=Math.round(u*e)}})):0==n&&(s.textContent=0)})()}))})(100,1),function(){const e=document.querySelector(".calc-block"),t=e.querySelectorAll("input"),o=e.querySelector(".calc-type"),n=document.querySelectorAll('[name = "user_email"]'),l=document.querySelectorAll('[name = "user_name"]'),r=document.querySelectorAll('[name="user_phone"]'),a=document.querySelectorAll('[type="submit"]'),c=document.querySelector('[placeholder="Ваше сообщение"]');t.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")}))})),o.addEventListener("change",(()=>{0==o.selectedIndex&&t.forEach((e=>{e.value=""})),0==o.selectedIndex?t.forEach((e=>{e.setAttribute("disabled","disabled")})):t.forEach((e=>{e.removeAttribute("disabled")}))}));const s=e=>{let t=e.replace(/\-{2,}/g,"-").replace(/\s{2,}/g," ");for(;" "==t[0]||"-"==t[0]||" "==t[t.length-1]||"-"==t[t.length-1];)t=t.replace(/^-+|-+$/g,""),t=t.replace(/^ +| +$/g,"");return t},u=e=>!(e.length<2)&&(e=>{let t=[];return e.split(" ").forEach((o=>{if(/^-/g.test(o))t.push(o);else{if(""==e.length)return;{let e=o[0].toUpperCase()+o.substr(1).toLowerCase();t.push(e)}}})),t})(s(e)).join(" "),d=e=>!(e.length<10)&&!!/^(?!.*@.*@.*$)(?!.*@.*\-\-.*\..*$)(?!.*@.*\-\..*$)(?!.*@.*\-$)(.*@.+(\..{1,11})?)$/.test(e)&&e.replace(/^\-+/g,""),i=e=>{let t=e.replace(/\-{2,}/g,"-");return(e=t.replace(/^-+|-+$/g,"").replace(/\({2,}/g,"(").replace(/\){2,}/g,")")).length>5&&e.length<15&&e};a.forEach((e=>{let t=!1;const o=e.parentElement.parentElement.parentElement.querySelector('[name = "user_name"]'),n=e.parentElement.parentElement.parentElement.querySelector('[name = "user_email"]'),l=e.parentElement.parentElement.parentElement.querySelector('[name = "user_phone"]');e.style.position="relative";const r=document.createElement("label");r.style.position="absolute",e.append(r),r.textContent="Нужно правильно заполнить все поля",r.style.top="-15px",r.style.left="5px",r.style.color="red",r.style.fontSize="12px",r.style.display="none";const a=a=>{a.preventDefault(),u(o.value)?(o.value=u(o.value),o.style.backgroundColor="white"):o.style.backgroundColor="pink",d(n.value)?(n.value=d(n.value),n.style.backgroundColor="white"):n.style.backgroundColor="pink",i(l.value)?(l.value=i(l.value),l.style.backgroundColor="white"):l.style.backgroundColor="pink",u(o.value)&&d(n.value)&&i(l.value)?(t=!0,r.style.display="none"):(t=!1,r.style.display="block"),e.closest(".footer-form")&&(c.value=s(c.value))};e.addEventListener("submit",a),o.addEventListener("blur",(e=>{u(o.value)?(o.value=u(o.value),o.style.backgroundColor="white"):o.style.backgroundColor="pink"})),n.addEventListener("blur",(e=>{d(n.value)?(n.value=d(n.value),n.style.backgroundColor="white"):n.style.backgroundColor="pink"})),l.addEventListener("blur",(e=>{i(l.value)?(l.value=i(l.value),l.style.backgroundColor="white"):l.style.backgroundColor="pink"})),e.closest(".footer-form")&&c.addEventListener("blur",a)})),n.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^a-zA-Z\-\@\_\.\!\~\*\']/,"")}))})),l.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я\-\s]/,"")}))})),r.forEach((e=>{e.addEventListener("input",(()=>{e.value.length>16?e.value=e.value.substr(0,16):e.value=e.value.replace(/[^\d\(\)\-\+]/,"")}))})),c.addEventListener("input",(()=>{c.value=c.value.replace(/[^а-яА-Я\-\s\d\,\.\:]/,"")}))}(),function(){const e=document.querySelectorAll(".service-tab"),t=document.querySelector(".service-header"),o=document.querySelectorAll(".service-header-tab");t.addEventListener("click",(t=>{o.forEach(((o,n)=>{o===t.target.closest(".service-header-tab")?(o.classList.add("active"),e[n].classList.remove("d-none")):(o.classList.remove("active"),e[n].classList.add("d-none"))}))}))}(),function(e,t,o,n,l,r="portfolio-item-active",a="dot-active"){const c=document.querySelector(`.${e}`),s=document.querySelectorAll(`.${t}`),u=document.querySelector(`.${o}`),d=document.querySelector(`.${r}`),i=document.querySelector(`.${l}`);let m=0;const p=[];let y;if(!(c&&s&&u&&d&&i))return;const v=(e,t,o)=>{e[t].classList.remove(o)},g=(e,t,o)=>{e[t].classList.add(o)},f=()=>{v(s,m,r),v(p,m,a),m++,m>=s.length&&(m=0),g(s,m,r),g(p,m,a)},h=(e=1500)=>{y=setInterval(f,e)};c.addEventListener("click",(e=>{e.target.matches(`.${n}, .${l}`)&&(e.preventDefault(),v(s,m,r),v(p,m,a),e.target.matches("#arrow-right")?m++:e.target.matches("#arrow-left")?m--:e.target.classList.contains(n)&&p.forEach(((t,o)=>{e.target===t&&(m=o)})),m>=s.length?m=0:m<0&&(m=s.length-1),g(s,m,r),g(p,m,a))})),c.addEventListener("mouseenter",(e=>{e.target.matches(`.${n}, .${l}`)&&(console.log(e.target),clearInterval(y))}),{capture:!0}),c.addEventListener("mouseleave",(e=>{e.target.matches(`.${n}, .${l}`)&&h(2e3)}),{capture:!0}),(()=>{for(let e=0;e<s.length;e++){let e=document.createElement("li");e.classList.add(n),p.push(e),u.append(e)}g(s,m,r),g(p,m,a)})(),h(2e3)}("portfolio-content","portfolio-item","portfolio-dots","dot","portfolio-btn"),t({formId:"form1",someElem:[{type:"block",id:"total"}]}),t({formId:"form2",someElem:[{type:"block",id:"total"}]}),t({formId:"form3",someElem:[{type:"block",id:"total"}]})})();